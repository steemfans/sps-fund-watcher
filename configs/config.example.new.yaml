# æ–°çš„å¤šè§„åˆ™ Telegram é…ç½®ç¤ºä¾‹
# æ­¤é…ç½®æ–‡ä»¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ–°çš„å¤šè§„åˆ™é…ç½®æ ¼å¼

steem:
  api_url: "https://api.steem.fans"
  start_block: 101777000
  batch_size: 100
  accounts:
    - "burndao.burn"

mongodb:
  uri: "mongodb://mongo:27017"
  database: "sps_fund_watcher"

telegram:
  enabled: true

  # å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰è§„åˆ™å…±äº«ï¼‰
  bot_token: "your_bot_token_here"
  channel_id: "your_channel_id_here"

  # å…¨å±€æ¶ˆæ¯æ¨¡æ¿ï¼ˆå½“è§„åˆ™æ²¡æœ‰é…ç½®è‡ªå·±çš„æ¨¡æ¿æ—¶ä½¿ç”¨ï¼‰
  message_template: |
    ğŸ”” <b>New Operation</b>

    <b>Account:</b> <code>{{.Account}}</code>
    <b>Type:</b> <code>{{.OpType}}</code>
    <b>Block:</b> <code>{{.BlockNum}}</code>
    <b>Time:</b> <code>{{.Timestamp}}</code>

    <b>Details:</b>
    {{.Details}}

  # æ–°æ ¼å¼ï¼šæ”¯æŒå¤šä¸ªé€šçŸ¥è§„åˆ™é…ç½®
  users:
    # è§„åˆ™1ï¼šç›‘æ§ burndao.burn çš„ transfer å’Œ account_update
    # å½“è½¬è´¦ç»™äº¤æ˜“æ‰€è´¦æˆ·æ—¶ï¼Œä¸å‘é€é€šçŸ¥
    - name: "main-account-monitor"
      accounts:
        - "burndao.burn"
      notify_operations:
        - "transfer"
        - "account_update"
      operation_filters:
        transfer:
          # ç™½åå•ï¼šè½¬è´¦åˆ°è¿™äº›åœ°å€æ—¶ä¸å‘é€é€šçŸ¥
          ignore_to_addresses:
            - "exchange.account"
            - "savings.account"
            - "bittrex"
            - "poloniex"

    # è§„åˆ™2ï¼šç›‘æ§æ‰€æœ‰è´¦æˆ·çš„æ‰€æœ‰æ“ä½œ
    # æ²¡æœ‰ç™½åå•è¿‡æ»¤ï¼Œæ‰€æœ‰é€šçŸ¥éƒ½å‘é€
    - name: "all-operations-monitor"
      accounts: []  # ç©ºè¡¨ç¤ºå…³æ³¨æ‰€æœ‰è¿½è¸ªçš„è´¦æˆ·
      notify_operations: []  # ç©ºè¡¨ç¤ºé€šçŸ¥æ‰€æœ‰æ“ä½œç±»å‹
      operation_filters: {}  # æ²¡æœ‰è¿‡æ»¤å™¨

    # è§„åˆ™3ï¼šåªç›‘æ§ç‰¹å®šè´¦æˆ·çš„æŠ•ç¥¨æ“ä½œ
    # ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿
    - name: "vote-monitor"
      accounts:
        - "burndao.burn"
        - "another.account"
      notify_operations:
        - "vote"
      operation_filters: {}
      # è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿ï¼ˆä¼šè¦†ç›–å…¨å±€æ¨¡æ¿ï¼‰
      message_template: |
        ğŸ—³ï¸ <b>New Vote Detected</b>

        <b>Voter:</b> <code>{{.Account}}</code>
        <b>Block:</b> <code>{{.BlockNum}}</code>

        <b>Details:</b>
        {{.Details}}

api:
  port: "8080"
  host: "0.0.0.0"
